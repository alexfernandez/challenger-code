<!DOCTYPE html>
<html lang="en">
	<head>
		<%- include('head.ejs') %>
		<title>Edit challenge - challengerco.de</title>
		<%- include('codemirror.ejs') %>
		<script src="/js/edit-challenge.js"></script>
	</head>
	<body>
		<%- include('topbar.ejs') %>
		<div class="wrapper columns">
			<div class="edit">
				<h1>Edit challenge</h1>
				<p>
				<label for="id">Challenge id:</label>
				<%= challenge.username || 'main' %> /
				<input type="text" id="id" value="<%= challenge.id || '' %>" placeholder="Unique id"/>
				</p>
				<p>
				<label for="id">Challenge name:</label>
				<input type="text" id="name" value="<%= challenge.name || '' %>" placeholder="Challenge name"/>
				</p>
				<p>
				<label for="category">Select category:</label>
				<select id="category">
					<option value="" disabled></option>>
					<% for (const category of categories) { %>
					<option value="<%= category %>"<%= category == challenge.category ? ' selected' : '' %>><%= category %></option>
					<% } %>
				</select>
				</p>
				<p>
				<label for="difficulty">Select difficulty:</label>
				<select id="difficulty">
					<option value="" disabled></option>>
					<% for (const difficulty of difficulties) { %>
					<option value="<%= difficulty %>"<%= difficulty == challenge.difficulty ? ' selected' : '' %>><%= difficulty %></option>
					<% } %>
				</select>
				</p>
				<p>
				<textarea class="description" id="description"
					placeholder="Enter long description"><%= challenge.description || '' %></textarea>
				</p>
				<p>
				<label for="runningTimeoutSeconds">Execution timeout (in seconds):</label>
				<input type="number" id="runningTimeoutSeconds" value="<%= challenge.runningTimeoutSeconds || '' %>"
					placeholder="Running timeout in seconds"/>
				</p>
				<p>
				<label for="maxMinutes">Max time to solve (in minutes):</label>
				<input type="number" id="maxMinutes" value="<%= challenge.maxMinutes || '' %>"
					placeholder="Max minutes for solution"/>
				</p>
			</div>
			<div class="solve">
				<h2>Reference Implementation</h2>
			<p>
			                <textarea class="solution" id="implementation">
/**
 * Write a function solve() with the reference implementation for the challenge.
 */
function solve(array) {
    // write your code here
}
</textarea>
				<h2>Verifications</h2>
				<div id="verifications">
					<% for (let i = 0; i < challenge.verifications.length; i++) { %>
					<% const verification = challenge.verifications[i] %>
					<p id="verification<%= i %>">
					<% const rawInput = JSON.stringify(verification.input) %>
					<% const input = rawInput.substring(1, rawInput.length - 1) %>
					<input type="text" id="input<%= i %>" value="<%= input %>"
						placeholder="Input parameters (JSON)"/>
					⇒
					<input type="number" id="output<%= i %>" value="<%= verification.output %>"
						placeholder="Output (number)"/>
						<button id="remove<%= i %>">-</button>
					</p>
					<% } %>
					<p id="verification" class="invisible">
					<input type="text" id="input" value="" placeholder="Input parameters (JSON)"/>
					⇒
					<input type="number" id="output" value="" placeholder="Output (number)"/>
					<button id="remove">-</button>
					</p>
				</div>
				<p>
				<button id="add-verification">+</button>
				</p>
				<p>
				<button id="save">Save</button>
				<span id="result"></span>
				</p>
			</div>
		</div>
		<%- include('bottombar.ejs') %>
  </body>
</html>
